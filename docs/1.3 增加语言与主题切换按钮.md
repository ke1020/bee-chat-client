在之前的视频中。
我们重构了 AI 对话工具的本地化与主题功能。
本节视频。
我们来给上述功能增加控制按钮。
在 components 目录下新增 Toolbars 目录。
用于存放工具栏相关的组件。
然后，在目录下新增 Language。Switch。tsx。
这是我们的语言切换组件。
将准备好的代码粘贴到文件中。
在 react 函数组件一开始。
从 locals 模型文件中引入。
当前语言 current。Language。
语言配置映射 language。Configs。
切换语言的方法 change。Local。
查看 locals 文件 language。Configs。
实际上就是语言配置的映射。
这一部分是构建菜单的函数。
Object。values。language。Configs 点 map。
是获取 language。Configs。的所有值进行遍历。
x 就是值中的每一项。
返回值就是根据传入的 x 构建的菜单项。
language。Configs。有几个值就会返回几个菜单项。
配置中有中文和英文，所以有 2 个菜单项。
on。click 事件中调用 change。Local。函数改变语言。
extra 属性表示为激活的菜单项添加一个 Badge 组件。
也就是这个蓝色小圆点。
菜单创建之后，基本上不需要变更。
所以使用 use。Memo 缓存。
只有 current。Language。发生变化重新设置激活菜单时。
才会重新构建菜单。
将 menu。Items 菜单项。
绑定到 Dropdown 组件的 menu 属性上。
最后，返回组件。
回到 index。tsx 文件。
在对话列表信息上方引入组件。
打开浏览器语言效果。
将语言切换为英文。
除了左侧的对话历史都变为英文了。
因为我们还没有重构对话历史列表。
所以这里没有切换为英文。
其实这里也不需要本地化。
对话历史保留原始语言就可以。

回到 IDE。
同样的，在 Toolbars 目录下新增 Theme。Switch。tsx。
主题切换组件。
粘贴准备好的代码。
函数组件中从 themes 模型文件。
引入 theme。Setting 与 change。Theme 。
还需要引入 local 本地化数据。
因为构建菜单需要使用。
与构建语言菜单差不多。
构建之后使用 use。Memo 进行缓存。
仅当 theme。Setting 与 local 对象发生变化时。
才重新构建菜单。
最后，将菜单项绑定到 Dropdown 组件的 menu 属性上。
返回组件。

回到 index。tsx 文件。
在 Language。Switch 组件下方引入组件。
在浏览器中预览。
切换亮色模式。
没有问题。
按钮放着这里不太美观。
我们将两个组件再包装一下。
在 Toolbars 目录下新增 index。tsx。
粘贴代码。
这里将两个组件。
使用 ant。d 中的固钉（affix）组件进行包裹。
并将固钉设置为绝对定位。
在网页的右上方。
最后返回首页引入。
引入后删除掉 Language。Switch 与 Theme。Switch 组件的导入。
回到浏览器预览，运行的很好。

本节视频，我们给 AI 对话工具增加了语言切换与主题切换按钮。
非常感谢大家的观看。
