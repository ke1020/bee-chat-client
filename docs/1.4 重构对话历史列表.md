本节视频，我们继续重构对话历史列表功能。
打开 Home 目录下的 index。tsx 文件。
Conversations 就是管理对话的组件。
先找到 Conversations 组件位置。
我们将该组件。
从 index。tsx 文件中拆分出来。
以减少本页面的大小。
在 components 目录下新增 Chat 目录。
在目录下新增 Conversations。tsx。文件。
在 index。tsx 文件。
复制 Conversations 组件代码。
回到 Conversations。tsx 文件。
export default 函数组件。
函数组件内 return，粘贴代码。
导入删除图标。
从 ant。design。x 中导入原始的 Conversations 组件。
然后，处理缺失的内容。
回到 index。tsx 文件。
复制 messages 数据类型。
在组件内新建一个 Props 接口。
为组件提供类型支持。
把类型粘贴到 Props 接口内。
导入原始类型。
把 props 添加到函数组件参数上。
表示该子组件，需要从外部传递 Conversations。Props 类型的参数。
参数传递进来之后，在 messages 前边加上 props 点。
表示这个属性是通过 props 传递进来的。
接着处理 message。A。p。i 这个参数。
回到 index。tsx 文件。
复制 message。A。p。i 数据类型。
粘贴到 Conversations。Props 接口内。
message。A。p。i 前边添加 props 点。
表示从外部传递进来的。
locale 对象，直接使用 use。Model 从模型文件中引入即可。
dayjs 从顶部导入一下。
add。Conversation 这些管理状态的函数。
我们新建一个 model 文件来管理。
从 index。tsx 文件中复制管理状态的函数。
在 models 目录下新建 conversations。ts 文件。
export default 函数组件。
在函数组件中粘贴复制的代码。
return 相关对象与函数。
单行太长了，断行处理一下。
导入一下 use。State 钩子函数。
use。X。Conversations。 也导入一下。
default。conversations。items。变量数据复制过来。
从 locals 模型导入 locale 本地化数据对象。
它这里有个 locale 类型不明确的提示。
我们在 locals 模型文件中。
将 Use。Locale。Return。接口导出一下。
然后将数据使用 as 转换一下类型。
这样就行了。

locale 对象是通过 use。State 管理状态的。
这里直接使用有可能尚未初始化。
这里粘贴一段初始化与更新对话列表的代码。
更新函数中判断 locale 对象。
如果不可用。
停止向下执行。
如何可用，则继续初始化与更新对话列表。
使用 use。Callback 缓存函数实例。
use。Callback 依赖 locale 与 set。Conversations。
当依赖项发生改变时，重新创建函数实例。

将 update。Conversations。函数作为 use。Effect 的依赖项。
当函数改变时，重新执行。
update。Conversations。函数
第一次执行是组件挂载时。
由于 locale 对象未就绪。
不会触发对话列表更新。
第二次执行是 locale 改变时。
locale 对象就绪。
执行后续对话列表更新。

我们把对话列表数据，包装到一个函数中返回。
函数名称就是 get。Conversations。
locale 类型就是 Use。Locale。Return。locale。
把 use。X。Conversations。函数参数设置为空对象。
因为此时 locale 尚未就绪。
c。u。r。Conversation。这里也一样。

回到 Conversations。tsx 文件。
从 conversations 模型中引入相关对象与方法。
这里还有一个 styles 需要引入。
styles 在我们的 themes 模型文件中定义。
这样组件中的代码就好了。

回到 index。tsx 文件。
删掉 Conversations 列表初始数据代码段。
删掉管理 Conversations 数据状态的代码段。
从 conversations 模型文件中引入 c。u。r。Conversation。
删掉这里的代码。
删掉 use。x。Conversations 导入。
删掉原始 Conversations 组件导入。
删掉 dayjs 导入。
导入我们自定义的 Conversations 组件。
Conversations 缺少 2 个属性。
把 messages 与 message。Api 传递给 Conversations 组件。
这里还缺一个 set。Active。Conversation 函数。
导入它。
解决一下这两个类型警告。
在相关函数中处理一下。
在浏览器中进行预览。
切换语言。
对话列表语言也变化了。
