修正 SRT 内容。参考文稿中的句号是静音气口。严格执行以下原则：
- 保持 SRT 序号与时间戳不变
- 仅对 SRT 进行修正，禁止删除内容
- 技术名词与大小写修正
- 拼写错误修正
- 代码与参数格式修正

参考文稿
```
大家好，本节继续重构输入框组件。
打开输入框组件入口文件。
把词槽配置剪切到模型文件中管理。
在 models 目录下新建 。sender。ts 文件。
文件中专门负责管理。
输入框组件的状态、业务逻辑与异步副作用等。
把词槽配置粘贴到函数组件外部。
以减少每次渲染的开销。
我们把词槽配置修改为一个函数。
函数接受 。locale。 本地化对象。
返回值为词槽配置对象。
引入。Sender。Props。接口。
在函数组件中声明 。slot。Config。 变量。
存储获取的词槽配置对象。
使用 。use。Memo。钩子函数缓存词槽配置对象。
仅在。locale。对象发生变更时重新获取。
最后将 。slot。Config。添加到返回对象上。
回到输入框入口。
引入词槽配置对象。
接下来，我们给输入框组件添加一个头部。
头部主要是附件上传功能。
就像这样。
在输入框入口文件同级新建。Header。tsx。文件。
这里我直接将代码粘贴一下。
组件接受 4 个传入参数。
attachments。Open。表示附件上传功能显示状态开关。
true 为显示。
false 为隐藏。
set。Attachments。Open。是显示或隐藏附件上传功能的函数。
file。List。表示附件列表。
set。File。List。是设置附件列表的函数。
forward。Ref 主要是父组件将 Attachments 组件的 ref 传进来。
父组件文件粘贴事件需要直接操作 Attachments 组件。
下边 UI 代码中将传进来的参数绑定到组件上。
回到输入框入口。
将 。Header。组件引入。
将。Header。组件需要的 4 个属性复制。
在 。sender。模型文件中添加状态管理的代码。
locale。这里进行一下类型转换。
file。List。这里的类型是 Upload。File。any。数组类型。
最后添加到返回对象中。
回到输入框入口。
从 。sender。模型引入。
再添加到。Header。组件参数中。
这里还缺少一个按钮。
点击按钮时显示或隐藏附件上传功能。
我们打开。Footer。组件。
在深度思考按钮前边添加。
导入。Button。组件。
Paper。Clip。是一个别针图标。
attachments。Open。与。set。Attachments。Open。
通过 。props。 参数传递过来。
在 。Footer。Props。接口中添加这两个参数。
回到输入框入口。
给。Footer。组件添加参数。
打开浏览器看一下。
不错！工作的很好。
但是有一个问题。
右侧出现了双滚动条。
这是因为整体高度溢出了。

消息列表元素与输入框元素是兄弟元素。
它们的父元素是。flex。布局。
我们先给输入框 。style。 添加 flex。shrink。0。
防止输入框在空间不足时自动缩小。
然后，打开。Messages。组件
可以看到。
消息列表高度计算方式是百分之百减去 一百六十 像素。
一百六十 像素就是原输入框的高度。
现在因为增加了附件上传的部分。
所以高度计算方式需要修改。
这里我们给它添加上。
flex 值为 1 表示占满剩余空间。
overflow 溢出显示滚动条。
三个要素。
父元素 是。flex。布局。
输入框固定高度。
剩余部分填充剩余空间。
打开浏览器再次预览。
现在页面高度溢出的问题就解决了。

回到输入框入口。
我们再来粘贴一段粘贴上传的代码。
attachments。Ref 表示创建一个上传组件实例的引用。
pending。Files。Ref。也是创建一个引用，
用于存储待处理的文件。
当附件面板未打开时暂存粘贴的文件。
on。Paste。File。是处理粘贴文件的回调函数。
当用户粘贴文件时。
会触发此函数。
并传入一个 。File。List。对象。
判断如果附件面板已经打开。
并且附件组件已挂载。
则直接调用 attachments。Ref。current。upload(file) 上传每个文件。
如果附件面板未打开。
则将文件暂存到 pending。Files。Ref。current。中。
并打开附件面板。

使用 use。Layout。Effect。确保在 DOM 更新后同步执行。
避免文件上传时附件组件尚未完成渲染。
在附件面板打开后立即处理暂存文件。
request。Animation。Frame。
确保在浏览器下一次重绘前执行，DOM。已更新完成。
cancel。Animation。Frame。(raf.Id) 。
表示组件卸载时取消未执行的动画帧回调。
防止内存泄漏。

把 on。Paste。File。添加到 。Sender。组件上。
把附件组件的 ref 传递给 Header 组件。
最后切换到浏览器测试一下。

以上就是本节内容。
```

SRT
```
1
00:00:00,042 --> 00:00:02,838
大家好，本节继续重构输入框组件

2
00:00:03,370 --> 00:00:05,718
打开输入框组件入口文件

3
00:00:09,834 --> 00:00:12,950
把词槽配置剪切到模型文件中管理

4
00:00:18,602 --> 00:00:21,526
在MODELS目录下新建SANDERTS文件

5
00:00:22,442 --> 00:00:27,798
文件中专门负责管理输入框组件的状态、业务逻辑与异步副作用等

6
00:00:31,850 --> 00:00:36,822
把词槽配置粘贴到函数组件外部，以减少每次渲染的开销

7
00:00:37,610 --> 00:00:40,533
我们把词槽配置修改为一个函数

8
00:00:49,194 --> 00:00:53,974
函数接受local本地化对象返回值为词槽配置对象

9
00:00:57,578 --> 00:01:03,190
在函数组件中声明slot config变量存储获取的词槽配置对象

10
00:01:03,402 --> 00:01:07,286
使用EOS Memo钩子函数缓存磁槽配置对象

11
00:01:14,602 --> 00:01:18,038
仅在LOOK OUT对象发生变更时重新获取

12
00:01:18,186 --> 00:01:21,813
最后将slot config添加到返回对象上

13
00:01:22,858 --> 00:01:24,438
回到输入框入口

14
00:01:25,290 --> 00:01:27,382
引入词槽配置对象

15
00:01:29,258 --> 00:01:32,502
接下来我们给输入框组件添加一个头部

16
00:01:32,906 --> 00:01:35,126
头部主要是附件上传功能

17
00:01:41,738 --> 00:01:46,390
在输入框入口文件同级新建header tsx文件

18
00:01:47,690 --> 00:01:50,229
这里我直接将代码粘贴一下

19
00:01:50,442 --> 00:01:52,662
组件接受四个传入参数

20
00:01:52,746 --> 00:01:57,910
ATTACHMENTS OPEN表示附件上传功能显示状态开关

21
00:01:57,930 --> 00:02:00,342
true为显示，false为隐藏

22
00:02:00,554 --> 00:02:05,718
SET ATTACHMENTS OPEN是显示或隐藏附件上传功能的函数

23
00:02:06,058 --> 00:02:08,406
FILELIST表示附件列表

24
00:02:09,066 --> 00:02:12,374
SET FILE LIST是设置附件列表的函数

25
00:02:13,098 --> 00:02:17,877
forward ref主要是副组件将 attachments 组件的 ref 传进来

26
00:02:18,026 --> 00:02:22,102
副组件文件粘贴事件需要直接操作ATTACHMENTS组件

27
00:02:24,490 --> 00:02:28,694
下边UI代码中将传进来的参数绑定到组件上

28
00:02:31,082 --> 00:02:34,070
回到输入框入口，将header组件引入

29
00:02:37,610 --> 00:02:40,598
将header组件需要的四个属性复制

30
00:02:46,314 --> 00:02:50,326
在SANDER模型文件中添加状态管理的代码

31
00:02:56,106 --> 00:02:58,838
LOCAL这里进行一下类型转换

32
00:03:07,370 --> 00:03:11,382
FILE LIST，这里的类型是UPLOAD FILE ANY数组类型

33
00:03:16,010 --> 00:03:18,102
最后添加到返回对象中

34
00:03:23,242 --> 00:03:24,886
回到输入框入口

35
00:03:27,401 --> 00:03:29,110
从SANDER模型引入

36
00:03:36,746 --> 00:03:39,286
再添加到header组件参数中

37
00:03:45,258 --> 00:03:50,550
这里还缺少一个按钮，点击按钮时显示或隐藏附件上传功能

38
00:03:53,258 --> 00:03:54,902
我们打开福特组件

39
00:03:55,178 --> 00:03:58,934
在深度思考按钮前边添加button组件

40
00:04:00,106 --> 00:04:02,710
paperclip是一个别针图标

41
00:04:03,306 --> 00:04:08,854
ATTACHMENTS OPEN与SET ATTACHMENTS OPEN通过PROPS参数传递过来

42
00:04:13,674 --> 00:04:17,045
在FUTURE PROPS接口中添加这两个参数

43
00:04:21,866 --> 00:04:23,574
回到输入框入口

44
00:04:24,874 --> 00:04:27,221
给FUTURE组件添加参数

45
00:04:31,466 --> 00:04:32,918
打开浏览器看一下

46
00:04:36,266 --> 00:04:37,947
不错，工作的很好

47
00:04:37,847 --> 00:04:41,110
但是有一个问题，右侧出现了双滚动条

48
00:04:41,386 --> 00:04:43,606
这是因为整体高度溢出了

49
00:04:43,626 --> 00:04:47,318
消息列表元素与输入框元素是兄弟元素

50
00:04:47,338 --> 00:04:49,878
他们的复元素是Flex布局

51
00:05:02,634 --> 00:05:09,263
开 messages 组件可以看到消息列表高度计算方式是百分之百减去一百六十像素

52
00:05:09,163 --> 00:05:16,630
一百六十像素就是原输入框的高度，现在因为增加了附件上传的部分，所以高度计算方式需要修改

53
00:05:16,586 --> 00:05:20,890
这里我们给它添加上Flex值V1，表示占满剩余空间

54
00:05:20,790 --> 00:05:23,478
Overflow溢出显示滚动条

55
00:05:24,394 --> 00:05:25,910
回到输入框

56
00:05:25,994 --> 00:05:33,334
给输入框包裹元素，style 添加 Flex shrink 0，防止输入框在空间不足时自动缩小

57
00:05:33,866 --> 00:05:42,422
这里的设置有三个要素，负元素是Flex布局输入框，保持其固定尺寸，剩余部分填充剩余空间

58
00:05:42,442 --> 00:05:44,406
打开浏览器，再次预览

59
00:05:44,874 --> 00:05:47,670
现在页面高度溢出的问题就解决了

60
00:05:56,778 --> 00:06:00,550
回到输入框入口，我们再来粘贴一段粘贴上传的代码

61
00:06:00,450 --> 00:06:05,142
attachments ref表示创建一个上传组件实例的引用

62
00:06:05,546 --> 00:06:12,950
PENDING FILES REF也是创建一个引用用于存储待处理的文件，当附件面板未打开时，暂存粘贴的文件

63
00:06:13,290 --> 00:06:17,110
on paste file 是处理粘贴文件的回调函数

64
00:06:17,130 --> 00:06:22,870
当用户粘贴文件时，会触发此函数，并传入一个file list对象

65
00:06:22,890 --> 00:06:31,958
判断如果附件面板已经打开，并且附件组件已挂载，则直接调用 attachments ref current upload file 上传每个文件

66
00:06:32,298 --> 00:06:38,870
如果附件面板未打开，则将文件暂存到PENDING FILES REF CURRENT中，并打开附件面板

67
00:06:44,202 --> 00:06:51,926
使用 use layout effect 确保在 DOM 更新后同步执行，避免文件上传时附件组件尚未完成渲染

68
00:06:52,266 --> 00:06:55,637
在附件面板打开后，立即处理暂存文件

69
00:06:55,786 --> 00:07:03,574
REQUEST ANIMATION FRAME确保在浏览器下一次重会前执行，确保在DOM更新之后再执行上传操作

70
00:07:03,594 --> 00:07:05,238
Cancel animation frame

71
00:07:05,322 --> 00:07:10,742
表示组件卸载时取消未执行的动画帧回调，防止内存泄露

72
00:07:11,978 --> 00:07:14,902
把 on pace file 添加到 standard 组件上

73
00:07:19,786 --> 00:07:23,030
把附件组件的ref传递给header组件

74
00:07:30,154 --> 00:07:32,566
最后切换到浏览器测试一下

75
00:07:34,378 --> 00:07:36,150
以上就是本节内容

76
00:07:38,922 --> 00:07:40,502
感谢大家观看
```